<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tonight's playlist</title>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <link href="assets/style.css" type="text/css" />
    <style>
        ul {
            list-style: none;
            padding-left: 0;
        }
        li {
            float: left;
            width: 100px;
            height: 100px;
            display: block;
        }
    </style>
</head>

<body>

    <div class="container" role="main">
        <div class="jumbotron">
            <h2 id="page-header">Who's playing near me tonight?</h2>
            <p>
                <a id=find-artists-button href="#" class="btn btn-primary btn-lg" role="button">
                    Find artists Â»
                </a>
            </p>
            <section>
                <h3>What's your mood?</h3>
                <ul id="term-grid">
                </ul>
            </section>

            <ul id="artist-grid">
            </ul>
        </div>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="assets/SpotifyLive.Location.js"></script>
    <script src="assets/SpotifyLive.SongKick.js"></script>>
    <script src="assets/SpotifyLive.EchoNest.js"></script>
    <script src="assets/SpotifyLive.Util.js"></script>

    <script>
        jQuery(function ($) {
            $(document).on('coordinates-found', function (event, coordinates) {
                SpotifyLive.Location.getCurrentCityAndCountryFromCoordinates(coordinates);
                SpotifyLive.SongKick.getAllEventsForToday(coordinates);
            });

            $(document).on('all-local-events-found', function (event, localEvents) {
                var normalisedArtists = SpotifyLive.Util.convertSongKickEventsToTasteProfileArtists(localEvents.events);

                SpotifyLive.EchoNest.uploadArtistsToTasteProfile(normalisedArtists);
            });

            $(document).on('area-found', function (event, area) {
                $pageHeader = $('#page-header');
                var text = $pageHeader.text();
                $pageHeader.text(text.replace("near me", "in " + area.city));
            });

            $(document).on('taste-profile-completed', function (event, tasteProfileId) {
                SpotifyLive.EchoNest.getTasteProfile(tasteProfileId, function (tasteProfile) {
                    var filteredArtists = SpotifyLive.Util.extractWorkableArtists(tasteProfile.artists);
                });
            });

            $('#find-artists-button').on('click', SpotifyLive.Location.getCurrentCoordinates);
        });
    </script>
</body>

</html>